import React, { useState, useEffect, useContext } from 'react';
import { useHistory } from 'react-router-dom';
import {
  makeStyles,
  Modal,
  Backdrop,
  Fade,
  Typography,
  Grid,
  Divider,
} from '@material-ui/core';
import './landing.css';
import { UserContext } from '../providers/UserProvider';
import { firebase, googleAuthProvider, auth } from '../../firebase';

const useStyles = makeStyles(() => ({
  modal: {
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center',
  },
  paper: {
    backgroundColor: '#fff',
    boxShadow: '1em',
    padding: '1em',
    color: 'black',
    border: '1px solid #f9f9f9',
    borderRadius: '4px',
  },
}));
const Landing = (props) => {
  const classes = useStyles();
  const history = useHistory();
  const user = useContext(UserContext);
  const [open, setOpen] = useState(false);
  // console.log(UserContext);
  const startLogin = () => {
    auth
      .signInWithPopup(googleAuthProvider)
      .then((res) => {
        history.push('/events');
      })
      .catch((error) => {
        alert(error.message);
      });
  };

  const toggleOpen = () => {
    setOpen(!open);
  };
  useEffect(() => {
    if (user) {
      history.push('/events');
      // setRedirect('/events');
    }
  }, [history, user]);
  return (
    <div class='landing' style={{ overflowY: 'hidden' }}>
      <main class='main'>
        <Modal
          aria-labelledby='transition-modal-title'
          aria-describedby='transition-modal-description'
          className={classes.modal}
          open={open}
          onClose={toggleOpen}
          closeAfterTransition
          BackdropComponent={Backdrop}
          BackdropProps={{
            timeout: 500,
          }}
        >
          <Fade in={open}>
            <div className={classes.paper}>
              <Grid container direction='row'>
                <Grid container direction='column' spacing={2}>
                  <Grid item>
                    <Typography variant='h4'>Register / Login</Typography>
                  </Grid>
                  <Grid item>
                    <Divider variant='middle' style={{ width: 'inherit' }} />
                  </Grid>
                </Grid>
                <Grid container direction='column' spacing={1}>
                  <button onClick={startLogin}>Login </button>
                </Grid>
              </Grid>
            </div>
          </Fade>
        </Modal>
        <svg
          width='251'
          height='22'
          viewBox='0 0 251 22'
          fill='none'
          xmlns='http://www.w3.org/2000/svg'
          class='logo'
        >
          <path
            d='M16.28 17L16.256 6.92L11.312 15.224H9.56L4.64 7.136V17H0.992V0.199999H4.208L10.496 10.64L16.688 0.199999H19.88L19.928 17H16.28ZM31.3779 17.288C28.9779 17.288 27.1059 16.624 25.7619 15.296C24.4339 13.968 23.7699 12.072 23.7699 9.608V0.199999H27.6579V9.464C27.6579 12.472 28.9059 13.976 31.4019 13.976C32.6179 13.976 33.5459 13.616 34.1859 12.896C34.8259 12.16 35.1459 11.016 35.1459 9.464V0.199999H38.9859V9.608C38.9859 12.072 38.3139 13.968 36.9699 15.296C35.6419 16.624 33.7779 17.288 31.3779 17.288ZM45.9239 17.288C44.7879 17.288 43.7399 17.08 42.7799 16.664C41.8359 16.232 41.0599 15.624 40.4519 14.84L42.6119 12.248C43.5239 13.48 44.5639 14.096 45.7319 14.096C47.3159 14.096 48.1079 13.168 48.1079 11.312V3.32H42.2039V0.199999H51.9719V11.096C51.9719 13.16 51.4599 14.712 50.4359 15.752C49.4119 16.776 47.9079 17.288 45.9239 17.288ZM75.6172 13.88V17H62.6092V0.199999H75.3052V3.32H66.4732V6.968H74.2732V9.992H66.4732V13.88H75.6172ZM91.1456 4.088L85.6976 17H81.8336L76.4096 4.088H80.2736L83.8496 12.872L87.5456 4.088H91.1456ZM104.97 10.592C104.97 10.64 104.946 10.976 104.898 11.6H95.1298C95.3058 12.4 95.7218 13.032 96.3778 13.496C97.0338 13.96 97.8498 14.192 98.8258 14.192C99.4978 14.192 100.09 14.096 100.602 13.904C101.13 13.696 101.618 13.376 102.066 12.944L104.058 15.104C102.842 16.496 101.066 17.192 98.7298 17.192C97.2738 17.192 95.9858 16.912 94.8658 16.352C93.7458 15.776 92.8818 14.984 92.2738 13.976C91.6658 12.968 91.3618 11.824 91.3618 10.544C91.3618 9.28 91.6578 8.144 92.2498 7.136C92.8578 6.112 93.6818 5.32 94.7218 4.76C95.7778 4.184 96.9538 3.896 98.2498 3.896C99.5138 3.896 100.658 4.168 101.682 4.712C102.706 5.256 103.506 6.04 104.082 7.064C104.674 8.072 104.97 9.248 104.97 10.592ZM98.2738 6.728C97.4258 6.728 96.7138 6.968 96.1378 7.448C95.5618 7.928 95.2098 8.584 95.0818 9.416H101.442C101.314 8.6 100.962 7.952 100.386 7.472C99.8098 6.976 99.1058 6.728 98.2738 6.728ZM115.31 3.896C116.91 3.896 118.198 4.376 119.174 5.336C120.166 6.296 120.662 7.72 120.662 9.608V17H116.918V10.184C116.918 9.16 116.694 8.4 116.246 7.904C115.798 7.392 115.15 7.136 114.302 7.136C113.358 7.136 112.606 7.432 112.046 8.024C111.486 8.6 111.206 9.464 111.206 10.616V17H107.462V4.088H111.038V5.6C111.534 5.056 112.15 4.64 112.886 4.352C113.622 4.048 114.43 3.896 115.31 3.896ZM132.384 16.376C132.016 16.648 131.56 16.856 131.016 17C130.488 17.128 129.928 17.192 129.336 17.192C127.8 17.192 126.608 16.8 125.76 16.016C124.928 15.232 124.512 14.08 124.512 12.56V7.256H122.52V4.376H124.512V1.232H128.256V4.376H131.472V7.256H128.256V12.512C128.256 13.056 128.392 13.48 128.664 13.784C128.952 14.072 129.352 14.216 129.864 14.216C130.456 14.216 130.96 14.056 131.376 13.736L132.384 16.376ZM156.835 17L156.811 6.92L151.867 15.224H150.115L145.195 7.136V17H141.547V0.199999H144.763L151.051 10.64L157.243 0.199999H160.435L160.483 17H156.835ZM169.413 3.896C171.413 3.896 172.949 4.376 174.021 5.336C175.093 6.28 175.629 7.712 175.629 9.632V17H172.125V15.392C171.421 16.592 170.109 17.192 168.189 17.192C167.197 17.192 166.333 17.024 165.597 16.688C164.877 16.352 164.325 15.888 163.941 15.296C163.557 14.704 163.365 14.032 163.365 13.28C163.365 12.08 163.813 11.136 164.709 10.448C165.621 9.76 167.021 9.416 168.909 9.416H171.885C171.885 8.6 171.637 7.976 171.141 7.544C170.645 7.096 169.901 6.872 168.909 6.872C168.221 6.872 167.541 6.984 166.869 7.208C166.213 7.416 165.653 7.704 165.189 8.072L163.845 5.456C164.549 4.96 165.389 4.576 166.365 4.304C167.357 4.032 168.373 3.896 169.413 3.896ZM169.125 14.672C169.765 14.672 170.333 14.528 170.829 14.24C171.325 13.936 171.677 13.496 171.885 12.92V11.6H169.317C167.781 11.6 167.013 12.104 167.013 13.112C167.013 13.592 167.197 13.976 167.565 14.264C167.949 14.536 168.469 14.672 169.125 14.672ZM186.865 3.896C188.465 3.896 189.753 4.376 190.729 5.336C191.721 6.296 192.217 7.72 192.217 9.608V17H188.473V10.184C188.473 9.16 188.249 8.4 187.801 7.904C187.353 7.392 186.705 7.136 185.857 7.136C184.913 7.136 184.161 7.432 183.601 8.024C183.041 8.6 182.761 9.464 182.761 10.616V17H179.017V4.088H182.593V5.6C183.089 5.056 183.705 4.64 184.441 4.352C185.177 4.048 185.985 3.896 186.865 3.896ZM200.819 3.896C202.819 3.896 204.355 4.376 205.427 5.336C206.499 6.28 207.035 7.712 207.035 9.632V17H203.531V15.392C202.827 16.592 201.515 17.192 199.595 17.192C198.603 17.192 197.739 17.024 197.003 16.688C196.283 16.352 195.731 15.888 195.347 15.296C194.963 14.704 194.771 14.032 194.771 13.28C194.771 12.08 195.219 11.136 196.115 10.448C197.027 9.76 198.427 9.416 200.315 9.416H203.291C203.291 8.6 203.043 7.976 202.547 7.544C202.051 7.096 201.307 6.872 200.315 6.872C199.627 6.872 198.947 6.984 198.275 7.208C197.619 7.416 197.059 7.704 196.595 8.072L195.251 5.456C195.955 4.96 196.795 4.576 197.771 4.304C198.763 4.032 199.779 3.896 200.819 3.896ZM200.531 14.672C201.171 14.672 201.739 14.528 202.235 14.24C202.731 13.936 203.083 13.496 203.291 12.92V11.6H200.723C199.187 11.6 198.419 12.104 198.419 13.112C198.419 13.592 198.603 13.976 198.971 14.264C199.355 14.536 199.875 14.672 200.531 14.672ZM223.884 4.088V14.84C223.884 17.208 223.268 18.968 222.036 20.12C220.804 21.272 219.004 21.848 216.636 21.848C215.388 21.848 214.204 21.696 213.084 21.392C211.964 21.088 211.036 20.648 210.3 20.072L211.788 17.384C212.332 17.832 213.02 18.184 213.852 18.44C214.684 18.712 215.516 18.848 216.348 18.848C217.644 18.848 218.596 18.552 219.204 17.96C219.828 17.384 220.14 16.504 220.14 15.32V14.768C219.164 15.84 217.804 16.376 216.06 16.376C214.876 16.376 213.788 16.12 212.796 15.608C211.82 15.08 211.044 14.344 210.468 13.4C209.892 12.456 209.604 11.368 209.604 10.136C209.604 8.904 209.892 7.816 210.468 6.872C211.044 5.928 211.82 5.2 212.796 4.688C213.788 4.16 214.876 3.896 216.06 3.896C217.932 3.896 219.356 4.512 220.332 5.744V4.088H223.884ZM216.804 13.304C217.796 13.304 218.604 13.016 219.228 12.44C219.868 11.848 220.188 11.08 220.188 10.136C220.188 9.192 219.868 8.432 219.228 7.856C218.604 7.264 217.796 6.968 216.804 6.968C215.812 6.968 214.996 7.264 214.356 7.856C213.716 8.432 213.396 9.192 213.396 10.136C213.396 11.08 213.716 11.848 214.356 12.44C214.996 13.016 215.812 13.304 216.804 13.304ZM240.017 10.592C240.017 10.64 239.993 10.976 239.945 11.6H230.177C230.353 12.4 230.769 13.032 231.425 13.496C232.081 13.96 232.897 14.192 233.873 14.192C234.545 14.192 235.137 14.096 235.649 13.904C236.177 13.696 236.665 13.376 237.113 12.944L239.105 15.104C237.889 16.496 236.113 17.192 233.777 17.192C232.321 17.192 231.033 16.912 229.913 16.352C228.793 15.776 227.929 14.984 227.321 13.976C226.713 12.968 226.409 11.824 226.409 10.544C226.409 9.28 226.705 8.144 227.297 7.136C227.905 6.112 228.729 5.32 229.769 4.76C230.825 4.184 232.001 3.896 233.297 3.896C234.561 3.896 235.705 4.168 236.729 4.712C237.753 5.256 238.553 6.04 239.129 7.064C239.721 8.072 240.017 9.248 240.017 10.592ZM233.321 6.728C232.473 6.728 231.761 6.968 231.185 7.448C230.609 7.928 230.257 8.584 230.129 9.416H236.489C236.361 8.6 236.009 7.952 235.433 7.472C234.857 6.976 234.153 6.728 233.321 6.728ZM246.085 5.792C246.533 5.168 247.133 4.696 247.885 4.376C248.653 4.056 249.533 3.896 250.525 3.896V7.352C250.109 7.32 249.829 7.304 249.685 7.304C248.613 7.304 247.773 7.608 247.165 8.216C246.557 8.808 246.253 9.704 246.253 10.904V17H242.509V4.088H246.085V5.792Z'
            fill='#D2B12B'
            fill-opacity='0.87'
          />
        </svg>

        <article class='article'>
            <img
              class='article_img'
              src='https://alcs-huddle.netlify.app/images/illustration-mockups.svg'
              alt=''
            />
          

          <content class='article_content'>
            {/* <h1 className="article_content_h1">Start organizing you events with us!</h1> */}
            <Typography variant='h2' style={{fontWeight:'400'}}>
Start organizing you events with us!
</Typography>
      <Typography variant='h4' style={{fontWeight:'50'}}>
              MUJ Event manager helps you find the events that are the best for
              you
    </Typography>
            <button onClick={toggleOpen}>Register</button>
          </content>
        </article>
      </main>
    </div>
  );
};
export default Landing;
